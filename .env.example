# ============================================================================
# Central Configuration for Tackle 4 Loss Intelligence Platform
# ============================================================================
# This is the central configuration file for all modules in the platform.
# Copy this file to .env and fill in your actual values.
# ============================================================================

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================
# Required for all modules that interact with the database
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_KEY="your-service-role-key-here"
SUPABASE_SCHEMA="public"

# Database Tables
TEAM_METADATA_TABLE="teams"
TEAM_ARTICLE_TABLE="team_article"
TEAM_ARTICLE_RELATIONSHIP_TABLE="team_article_image"
TEAM_IMAGE_TABLE="article_images"

# Supabase Edge Functions
TEAM_NEWS_FUNCTION="team-news-urls"
SUPABASE_FUNCTION_TIMEOUT=30

# ============================================================================
# AI/LLM API KEYS
# ============================================================================

# Google Gemini API (used by article_summarization, content_summarization)
GEMINI_API_KEY="your-gemini-api-key-here"
GEMINI_MODEL="gemini-2.5-flash"  # Options: gemini-2.5-flash, gemini-2.5-pro

# OpenAI API (used by team_article_generation, article_translation, story_embeddings, knowledge_extraction)
OPENAI_API_KEY="your-openai-api-key-here"

# Model selection for different services
OPENAI_TEAM_MODEL="gpt-4o"              # For team article generation
OPENAI_TRANSLATION_MODEL="gpt-4o-mini"  # For article translation
OPENAI_EMBEDDING_MODEL="text-embedding-3-small"  # For story embeddings
OPENAI_EXTRACTION_MODEL="gpt-4o-mini"   # For knowledge extraction

# ============================================================================
# GOOGLE CUSTOM SEARCH (for image selection)
# ============================================================================
Custom_Search_API_KEY="your-google-custom-search-api-key"
GOOGLE_CUSTOM_SEARCH_ID="your-custom-search-engine-id"

# ============================================================================
# URL CONTENT EXTRACTION
# ============================================================================
# No module-specific configuration needed
# Uses central LOG_LEVEL and operates in-process

# ============================================================================
# ARTICLE SUMMARIZATION
# ============================================================================
# Uses GEMINI_API_KEY and GEMINI_MODEL from above
# Optional: Override model for summarization specifically
# SUMMARIZATION_MODEL="gemini-2.5-flash"

# ============================================================================
# TEAM ARTICLE GENERATION
# ============================================================================
# Uses OPENAI_API_KEY and OPENAI_TEAM_MODEL from above
# Optional: Override model for article generation specifically
# GENERATION_MODEL="gpt-4o"

# ============================================================================
# ARTICLE TRANSLATION
# ============================================================================
# Uses OPENAI_API_KEY and OPENAI_TRANSLATION_MODEL from above
# Optional: Override model for translation specifically
# TRANSLATION_MODEL="gpt-4o-mini"

# ============================================================================
# DAILY TEAM UPDATE PIPELINE
# ============================================================================

# Service Endpoints (for Cloud Function deployment)
# Leave empty for local in-process execution
CONTENT_EXTRACTION_URL=""
CONTENT_EXTRACTION_API_KEY=""
CONTENT_EXTRACTION_TIMEOUT=120

SUMMARIZATION_URL=""
SUMMARIZATION_API_KEY=""
SUMMARIZATION_TIMEOUT=180

ARTICLE_GENERATION_URL=""
ARTICLE_GENERATION_API_KEY=""
ARTICLE_GENERATION_TIMEOUT=240

TRANSLATION_URL=""
TRANSLATION_API_KEY=""
TRANSLATION_TIMEOUT=180

IMAGE_SELECTION_URL=""
IMAGE_SELECTION_API_KEY=""
IMAGE_SELECTION_TIMEOUT=120

# Pipeline Behavior
PIPELINE_PARALLEL=false
PIPELINE_MAX_WORKERS=4
PIPELINE_CONTINUE_ON_ERROR=true
PIPELINE_DRY_RUN=false
PIPELINE_IMAGE_COUNT=2
PIPELINE_MAX_URLS_PER_TEAM=10
PIPELINE_ALLOW_EMPTY_URLS=false
PIPELINE_SUMMARIZATION_BATCH_SIZE=5
SERVICE_MAX_PARALLEL_REQUESTS=4

# ============================================================================
# DATA LOADING
# ============================================================================
# No additional configuration needed beyond SUPABASE_* variables

# ============================================================================
# NEWS EXTRACTION
# ============================================================================
# Uses SUPABASE_* variables for database access

# ============================================================================
# CONTENT SUMMARIZATION
# ============================================================================
# Uses GEMINI_API_KEY and GEMINI_MODEL from above

# ============================================================================
# STORY EMBEDDINGS
# ============================================================================
# Uses OPENAI_API_KEY and OPENAI_EMBEDDING_MODEL from above

# ============================================================================
# STORY GROUPING
# ============================================================================
# No additional configuration needed

# ============================================================================
# KNOWLEDGE EXTRACTION
# ============================================================================
# Uses OPENAI_API_KEY and OPENAI_EXTRACTION_MODEL from above

# ============================================================================
# IMAGE SELECTION
# ============================================================================
# Uses Custom_Search_API_KEY, GOOGLE_CUSTOM_SEARCH_ID, SUPABASE_* from above

# ============================================================================
# GAME ANALYSIS PACKAGE
# ============================================================================
# Uses SUPABASE_* variables for database access

# ============================================================================
# GENERAL SETTINGS
# ============================================================================

# Logging
LOG_LEVEL="INFO"  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

# Processing Configuration
BATCH_SIZE=10           # Number of items to process in one batch
MAX_RETRIES=3           # Number of retries for failed requests
ENABLE_GROUNDING=false  # Enable Google Search grounding for verification

# Rate Limiting
MAX_REQUESTS_PER_MINUTE=60

# ============================================================================
# DEPLOYMENT SETTINGS (Cloud Functions)
# ============================================================================
# These are used during deployment, not runtime
# PORT=8080  # Local development port (defaults to 8080)
# FUNCTION_TIMEOUT=540  # Cloud Function timeout in seconds (max 540 for gen2)
# FUNCTION_MEMORY=2048  # Cloud Function memory in MB
